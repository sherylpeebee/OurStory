<!DOCTYPE html>
<html>
  <head>
    <title>The History of Us</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- <link src="/bower_components/bootstrap/dist/css/bootstrap.css"> -->
    <link href="/bower_components/lightbox2/dist/css/lightbox.css" rel="stylesheet">
    <link href="/bower_components/toastr/toastr.css" rel="stylesheet">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <link rel='stylesheet' href="stylesheets/timeline.css"/>
    <link rel='stylesheet' href="stylesheets/style.css"/>
  </head>
  <body ng-app="OurStory" ng-controller="PrimaryCtrl">

  <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper">
        <a ui-sref="home" class="brand-logo">The History of Us</a>
        <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
          <li data-activates="slide-out" data-position="bottom" data-delay="50" ng-show="userCheck" class="collapse"  id="userGreet">Welcome back, <a class="tooltipped " data-tooltip="View Account" href="#" id="user" ng-click="findUser()">{{authenticatedUser.username}}!</a></li>
          <li ng-hide="userCheck" ng-click="login()"><a href="">sign in/sign up</a></li>
          <li><a href="" ng-show="userCheck" ng-click="logout()">log out</a></li>
          <li ng-if="userCheck" id="profile-pic-li"><img id="profile-pic" class="responsive-img circle" ng-src="{{authenticatedUser.profileImageURL}}" alt="" /></li>
        </ul>
      </div>
    </nav>
  </div>


<nav class="side-nav"  id="slide-out">
    <div class="row">
      <div class="header center deep-purple lighten-5"><h4 id="profileHeader">Account Details</h4></div>
      <h6 class="update" ng-class="{ 'hidden': verifyInfo }"> You haven't created an account yet! </h6>
        <div class="row">
          <div class="col s12 accordian_wrapper">
              <ul class="collapsible" data-collapsible="accordion" style="width:100%">
                <li>
                  <div class="collapsible-header"><i class="material-icons">face</i>
                    The Basics
                    <div id="accountPrompt" ng-if="!currentData">
                    You haven't created an account yet!
                    </div>
                </div>
                  <!-- <i class="material-icons">perm_identity</i> -->
                  <div class="collapsible-body accordian-menu" style="color:white">
                    <br>
                    <div id="infoPrompt" ng-if="!currentData">
                      Provide some basic information below to get started:
                    </div>
                    <form class="" ng-submit="updateAccount(current)">

                         <input id="full_name" type="text" ng-model="current.full_name" >
                         <label for="full_name">full name (to help people find you)</label>

                         <input id="partner" type="text" ng-model="current.partner.name">
                         <label for="partner">partner (to begin writing history!)</label>

                         <p>
                           <input class="with-gap" name="partner_search" type="radio" id="username_search" value="username" ng-model="current.partner.search" />
                           <label for="username_search">Search by username</label>
                         </p>
                         <p>
                           <input class="with-gap" name="partner_search" type="radio" id="full_name_search" value="full_name" ng-model="current.partner.search" />
                           <label for="full_name_search">Search by full name</label>
                           <a class="btn red lighten-1 search_partner waves-effect waves-light" ng-click="findPartner(current.partner)">
                             <i class="material-icons lookup">search</i>
                           </a>
                         </p>
                         <!-- <input id="profile_pic" type="text" ng-model="current.profile_picture">
                         <label for="profile_pic">profile picture url</label> -->
                         <button class="btn account_info" ng-show="!currentData"type="submit" name="button">Create Account</button>
                         <button class="btn account_info" ng-hide="!currentData" type="submit" name="button">Update Account</button>
                          <!-- ng-class="{ 'inactive': verifyInfo }"  -->
                         <br>
                         <br>

                    </form>
                  </div>
                </li>
                <li>
                  <div class="collapsible-header"><i class="material-icons">add_alert</i>Notifications</div>
                    <div class="collapsible-body side_nav" >
                      <h5 id="newRequests" style="font-weight: 100" class="center-align">New Requests</h5>
                      <div class="center-align" ng-if="!newData.incoming_requests" id="request_updates">none right now</div>

                      <form class="">
                        <div class="incoming-requests" ng-repeat="request in newData.incoming_requests || currentData.incoming_requests track by $index">
                          <!-- <div class="" ng-hide="reviewed"> -->
                            <p class="incoming-requests" >
                             <input class="with-gap" name="request{{$index}}" type="radio" id="{{request.from}}yes" value="{{request.from}}" ng-model="response.accept"/>
                             <label for="{{request.from}}yes">{{request.from}} (accept)</label>
                            </p>
                            <p class="incoming-requests" >
                             <input class="with-gap" name="request{{$index}}" type="radio" id="{{request.from}}no" value="{{request.from}}yes" ng-model="response.reject"/>
                             <label for="{{request.from}}no">{{request.from}} (reject)</label>
                            </p>
                            <button type="button" name="button" class="btn yellow darken-3" ng-click="updatePartner(response, request)">reply</button>
                            <div class="divider"></div>
                          <!-- </div> -->

                        </div>
                      </form>
                    </div>
                </li>
                <li>
                  <div class="collapsible-header"><i class="material-icons">people</i>Your Relationships</div>
                  <div class="collapsible-body side_nav">
                    <ul>
                      <li ng-hide="currentData">Nothing New Here</li>
                      <li ng-show="currentData" ng-repeat="relationship in currentData.relationships">
                        <div class="relationships">
                          <span class="avatar">
                            <img ng-src={{relationship.partnerIds.imgTwo}} alt="" class="circle partnerPics">
                          </span>
                          <a ui-sref="currentUser({id: relationship._id})" ><span class="partnerLink animated pulse">{{relationship.names[0]}}</span></a>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
          </div>
    </div>
  </div>
</nav>


    <div ui-view></div>


    <!-- <input name="file" type="file"
       class="cloudinary-fileupload" data-cloudinary-field="image_id"
       data-form-data="" >
    </input> -->


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="/bower_components/lightbox2/dist/js/lightbox.js"></script>
    <script src="/bower_components/toastr/toastr.js"></script>
    <!-- // <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.js"></script>
    <script src="config/app.js" type="text/javascript"></script>
    <script src="config/routes.js" type="text/javascript"></script>
    <script src="config/run.js" type="text/javascript"></script>
    <script src="controllers/primaryCtrl.js" type="text/javascript"></script>
    <script src="controllers/currentUserCtrl.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
    <script src="/javascripts/cloudinary/iframe-transport.js" type="text/javascript"></script>
    <script src="/javascripts/cloudinary/jquery-ui-widget.js" type="text/javascript"></script>
    <script src="/javascripts/cloudinary/fileupload.js" type="text/javascript"></script>
    <script src="/javascripts/cloudinary/jquery.cloudinary.js" type="text/javascript"></script>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.2/angularfire.min.js"></script>
    <script language="javascript" src="javascripts/lz-string.js"></script>
    <script src="factories/authFactory.js" type="text/javascript"></script>
    <script src="factories/userFactory.js" type="text/javascript"></script>
    <!-- // <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.43.min.js"></script> -->
  </body>
</html>
